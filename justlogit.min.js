"use strict";!function(){var e=function(){var u="https://addto.justlog.it/v1/log/",o="__jlimarker",d=this;function c(e){var t=document.createElement("IMG");t.src=e,t.style.width=0,t.style.height=0,t.style.display="none",document.body.appendChild(t)}this.token="",this.userid=null,this.dnt=!1,this.handleGlobalErrors=!1,this.generateRandomId=!0,this.getUserMarker=function(){return this.userid||(this.userid=this.getMarkerFromCookie(),!this.userid&&this.generateRandomId&&(this.userid=(new Date).getTime()%1e4*parseInt(1e3*Math.random(),10)+parseInt(50*Math.random(),10),this.setCookie(this.userid))),void 0===this.userid||null===this.userid?"":this.userid},this.getMarkerFromCookie=function(){if(-1===document.cookie.indexOf(o))return null;for(var e=document.cookie.split(";"),t=0,n=e.length;t<n;t++)if(-1<e[t].indexOf(o))return e[t].substr(e[t].indexOf("=")+1);return null},this.setCookie=function(e){if(this.dnt){var t=new Date;t.setTime(t.getTime()+2592e6);var n="; expires="+t.toGMTString();document.cookie=o+"="+e+n+"; path=/"}},this.init=function(){if(!this.token){var e=function(){if(document.currentScript)return document.currentScript;for(var e=document.getElementsByTagName("SCRIPT"),t=0,n=e.length;t<n;t++){var o=e[t];if(-1<o.src.indexOf("justlogit"))return o}}();if(e){var t=e.attributes.token;t&&(this.token=t.value)}}},this.logPerformance=function(e,t,n,o){if(this.token){var r,i=(r=e,t.getTime()-r.getTime()),s=this.getUserMarker(),d=u+this.token+"/perf?m="+encodeURIComponent(n)+"&t="+i;if(!this.dnt&&s&&(d+="&u="+encodeURIComponent(s)),document.referrer&&(d+="&r="+encodeURIComponent(document.referrer)),o&&"object"==typeof o)for(var a in o)d+="&"+encodeURIComponent(a)+"="+encodeURIComponent(o[a]);c(d)}},this.logEvent=function(e,t,n){if(this.token){var o=this.getUserMarker(),r=u+this.token+"/event?n="+encodeURIComponent(e);if(t&&(r+="&d="+encodeURIComponent(t)),!this.dnt&&o&&(r+="&u="+encodeURIComponent(o)),document.referrer&&(r+="&r="+encodeURIComponent(document.referrer)),n&&"object"==typeof n)for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);c(r)}},this.logError=function(e,t,n){if(this.token&&e){var o={},r=this.getUserMarker();if(o.message="object"!=typeof e?e:e.message,o.stack=e.stack||"",t&&(e.details=t),!this.dnt&&r&&(o.user=r),document.referrer&&(o.referrer=document.referrer),n&&"object"==typeof n)for(var i in n)o[i]=n[i];!function(e,t,n){var o="";o="object"==typeof t?JSON.stringify(t):t;var r=new XMLHttpRequest;r.onreadystatechange=function(){4!=r.readyState||200!=r.status&&204!=r.status||(n?n(!0):500<=r.status&&n&&n(!1))},r.open("POST",e,!0),r.setRequestHeader("content-type","application/json"),r.send(o)}(u+this.token+"/error",o,null)}},this.logInformation=function(e,t,n){if(this.token){var o=this.getUserMarker(),r=u+this.token+"/info?m="+encodeURIComponent(e);if(t&&(r+="&d="+encodeURIComponent(t)),!this.dnt&&o&&(r+="&u="+encodeURIComponent(o)),document.referrer&&(r+="&r="+encodeURIComponent(document.referrer)),n&&"object"==typeof n)for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);c(r)}},this.setUserMarker=function(e){this.userid=e,this.dnt=!1,this.setCookie(this.userMarker)},this.enableUserTracking=function(){this.dnt=!1},this.doNotTrack=function(e){this.dnt=e},window.onerror=function(e,t,n,o,r){if(d.handleGlobalErrors){var i=t+" line: "+n,s=r;r?"string"==typeof r&&((s={}).message=r,s.stack=i):((s={}).message=e,s.stack=i),s.stack||(s.stack=i),d.logError(s,e,null)}return!1}};if(window.justlogit){if(!window.justlogit.init){var t;(t=new e).init(),window.justlogit.hasOwnProperty("token")&&(t.token=window.justlogit.token),window.justlogit.hasOwnProperty("userid")&&(t.userid=window.justlogit.userid),window.justlogit.hasOwnProperty("dnt")&&(t.dnt=window.justlogit.dnt),window.justlogit.hasOwnProperty("handleGlobalErrors")&&(t.handleGlobalErrors=window.justlogit.handleGlobalErrors),window.justlogit.hasOwnProperty("generateRandomId")&&(t.generateRandomId=window.justlogit.generateRandomId),window.justlogit=t}}else window.justlogit={},(t=new e).init(),window.justlogit=t}();